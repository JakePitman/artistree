<% unless current_user.profile.nil? %>
    <div class="color-stroke color-stroke-green">
        <h1 class="page-heading" style="transform: rotate(358deg); padding-top: 40px;">My Profile</h1>
    </div>    
    <div class="divider"></div>
    <div class="request-boards">
        <table class="request-board">
            <tr>
                <th colspan="2"><%= link_to "Incoming Requests", 'incoming_requests' %></th>
            </tr>
            <% current_user.incoming_requests.each do  |request| %>
                <tr>
                    <td><%= request.buyer.profile.username %></td>
                    <td class="checkbox">!</td>
                </tr>
            <% end %>
        </table>
        <table class="request-board">
            <tr>
                <th colspan="2"><%= link_to "Outgoing Requests", 'outgoing_requests' %></th>
            </tr>
            <% current_user.outgoing_requests.each do  |request| %>
                <tr>
                    <td><%= request.artist.profile.username %></td>
                    <td class="checkbox">!</td>
                </tr>
            <% end %>
        </table>
    </div>

    <div class="divider"></div>
    <div class="divider"></div>

    <div class="color-splash color-splash-green">
        <h1 class="page-subheading">My Portfolio</h1>
        <div class="divider"></div>

        <% if current_user.prof_pictures.empty? %>
            <h2>Your portfolio is a place for you to store examples of art that you have created! Images that 
                you upload to your portfolio will be visible to others, and they may contact you with a request
                if they like your style!</h2>
                <p class="btn btn-green" style="line-height: 1.1; width: 450px; text-align: center;">
                    <%= link_to "Upload your first image!", new_prof_picture_path %>
                </p>
        <% else %>
            <%= link_to "Upload another image", new_prof_picture_path %>
            <div class="divider"></div>
            <% current_user.styles.each do |style| %>
                <div class="style-reel">
                    <h1 class="page-subheading"><%= style.style_name %></h1>
                    <% current_user.prof_pictures.where(style: style).each do |image| %>
                        <div class="image-card">
                            <div class="image-card-image">
                                <%= image_tag image.image_url(:medium) %>
                            </div>
                            <p class="image-card-description">
                                <%= image.description %>
                            </p>    
                        </div>
                    <% end %>
                </div>
            <% end %>

        <% end %>
    </div>

<% else %>
    <div class="color-stroke color-stroke-green">
        <h1 class="page-heading">Your Profile</h1>
    </div>
    <div class="divider"></div>
        <h3>Thank you for signing up to Artistree.</h3>
        <h3>This is your profile page, where you can:</br>
            - Build a portfolio of your work</br>
            - View your incoming and outcoming requests,</br>
            - And update your details</h3>
        <h3>Creating a profile is quick and easy - Just click the button below to get started</h3>
        <div class="divider"></div>
        <p class="btn btn-green"><%= link_to "Create Profile", new_profile_path %></p>
<% end %>

<div class="divider"></div>
<div class="divider"></div>
